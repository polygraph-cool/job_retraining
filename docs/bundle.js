!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),window.innerWidth;var r=null,i={},o={},a={},c={};function d(e,t){return e.filter(function(e){return e.id_selected===t})}function u(e){return d3.scaleLinear().domain(d3.extent(e,function(e){return e.similarity})).range([0,800])}t.default={init:function(){var e,t=[];["crosswalk","similarity"].forEach(function(e){t.push("assets/data/"+e+".csv")}),(e=d3).loadData.apply(e,t.concat([function(e,t){var n=t[0],l=t[1];n.forEach(function(e){e.id=+e.id,e.auto=+e.auto,e.wage=+e.wage,e.number=+e.number}),l.forEach(function(e){e.similarity=+e.similarity,e.id_compared=+e.id_compared,e.id_selected=+e.id_selected}),r=l;var s=d3.select("body").append("div.svg-container").append("svg.scatter");s.at("height",600).at("width",800).st("fill","#00000");var f=d(l.filter(function(e){return e.id_selected<5}),3),p=d3.scaleLinear().domain([0,1]).range([0,600]),v=u(f),b=d3.scaleLinear().domain([5,2,1.25,1.1,.9,.75,.5,.2]).range(["#a50026","#d73027","#f46d43","#fee090","#e0f3f8","#74add1","#4575b4","#313695"]),m=d3.scaleSqrt().domain([0,d3.max(n,function(e){return e.wage})]).range([0,6]);n.forEach(function(e){i[e.id]=e.job_name}),n.forEach(function(e){o[e.id]=e.number}),n.forEach(function(e){a[e.id]=e.auto}),n.forEach(function(e){c[e.id]=e.wage}),d3.selectAll("div.job-button").data(n).enter().append("div.job-button").st("height",20).st("width",500).text(function(e){return e.job_name}).on("click",function(e){var t=e.id,n=d(r,t),l=u(n);d3.selectAll("circle.job").remove();var s=d3.select("svg.scatter").selectAll("circle.job").data(n).enter().append("circle.job");console.log(n),s.at("cx",function(e){return l(e.similarity)}).at("cy",function(e){return p(a[e.id_compared])}).st("fill",function(e){var t=c[e.id_selected],n=c[e.id_compared];return b(t/n)}).at("r",function(e){var t=o[e.id_compared];return m(t)}).st("stroke","black"),s.on("mouseenter",function(e){d3.select("div.job-selected-name").text("Main job: "+i[e.id_selected]),d3.select("div.job-compared-name").text("Compared job: "+i[e.id_compared]),d3.select("div.job-selected-number").text("Main job quantity: "+o[e.id_selected]),d3.select("div.job-compared-number").text("Compared job quantity: "+o[e.id_compared])})});var j=s.selectAll("circle.job").data(f).enter().append("circle.job");j.at("cx",function(e){return v(e.similarity)}).at("cy",function(e){return p(a[e.id_compared])}).at("r",function(e){var t=o[e.id_compared];return m(t)}).st("stroke","black").st("fill",function(e){var t=c[e.id_selected],n=c[e.id_compared];return b(t/n)});var y=d3.select("div.svg-container").append("div.jobTooltip");y.append("div.job-selected-name"),y.append("div.job-compared-name"),y.append("div.job-selected-number"),y.append("div.job-compared-number"),j.on("mouseenter",function(e,t,n){d3.select("div.jobTooltip");var r=d3.select(n[t]).at("cx");console.log(r),d3.select("div.job-selected-name").text("Main job: "+i[e.id_selected]),d3.select("div.job-compared-name").text("Compared job: "+i[e.id_compared]),d3.select("div.job-selected-number").text("Main job quantity: "+o[e.id_selected]),d3.select("div.job-compared-number").text("Compared job quantity: "+o[e.id_compared])})}]))},resize:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}};t.default=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){var n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,s=u||l||Function("return this")(),f=Object.prototype.toString,p=Math.max,v=Math.min,b=function(){return s.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function j(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==r}(e))return n;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var u=a.test(e);return u||c.test(e)?d(e.slice(2),u?2:8):o.test(e)?n:+e}e.exports=function(e,t,n){var r,i,o,a,c,d,u=0,l=!1,s=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function g(e){var n=e-d;return void 0===d||n>=t||n<0||s&&e-u>=o}function h(){var e=b();if(g(e))return _(e);c=setTimeout(h,function(e){var n=t-(e-d);return s?v(n,o-(e-u)):n}(e))}function _(e){return c=void 0,f&&r?y(e):(r=i=void 0,a)}function x(){var e=b(),n=g(e);if(r=arguments,i=this,d=e,n){if(void 0===c)return function(e){return u=e,c=setTimeout(h,t),l?y(e):a}(d);if(s)return c=setTimeout(h,t),y(d)}return void 0===c&&(c=setTimeout(h,t)),a}return t=j(t)||0,m(n)&&(l=!!n.leading,o=(s="maxWait"in n)?p(j(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),x.cancel=function(){void 0!==c&&clearTimeout(c),u=0,r=d=i=c=void 0},x.flush=function(){return void 0===c?a:_(b())},x}}).call(this,n(2))},function(e,t,n){"use strict";var r=a(n(3)),i=a(n(1)),o=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var c=d3.select("body"),d=0;c.classed("is-mobile",i.default.any()),window.addEventListener("resize",(0,r.default)(function(){var e=c.node().offsetWidth;d!==e&&(d=e,o.default.resize())},150)),o.default.init()}]);