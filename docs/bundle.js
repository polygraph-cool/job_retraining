!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),window.innerWidth;var i=null,r={},o={},a={},c={},d={},u=[0,0,0,0,0],l=[];function s(e,t){return e.filter(function(e){return e.id_selected===t})}function f(e){return d3.scaleLinear().domain(d3.extent(e,function(e){return e.similarity})).range([0,800])}t.default={init:function(){var e,t=[];["crosswalk_jobs","similarity","crosswalk_skills","skills"].forEach(function(e){t.push("assets/data/"+e+".csv")}),(e=d3).loadData.apply(e,t.concat([function(e,t){var n=t[0],p=t[1],b=t[2];l=t[3],n.forEach(function(e){e.id=+e.id,e.auto=+e.auto,e.wage=+e.wage,e.number=+e.number}),p.forEach(function(e){e.similarity=+e.similarity,e.id_compared=+e.id_compared,e.id_selected=+e.id_selected}),l.forEach(function(e){e.id_selected=+e.id_selected,e.imp=+e.imp,e.skill_id=+e.skill_id,e.rank=+e.rank}),b.forEach(function(e){e.skill_id=+e.skill_id}),i=p;var v=d3.select("body").append("div.svg-container").append("svg.scatter");v.at("height",600).at("width",800).st("fill","#00000");var m=s(p.filter(function(e){return e.id_selected<5}),3),j=d3.scaleLinear().domain([0,1]).range([0,600]),y=f(m),_=d3.scaleLinear().domain([5,2,1.25,1.1,.9,.75,.5,.2]).range(["#a50026","#d73027","#f46d43","#fee090","#e0f3f8","#74add1","#4575b4","#313695"]),h=d3.scaleSqrt().domain([0,d3.max(n,function(e){return e.wage})]).range([0,6]);n.forEach(function(e){r[e.id]=e.job_name}),n.forEach(function(e){o[e.id]=e.number}),n.forEach(function(e){a[e.id]=e.auto}),n.forEach(function(e){c[e.id]=e.wage}),b.forEach(function(e){return d[e.skill_id]=e.skill}),d3.selectAll("div.job-button").data(n).enter().append("div.job-button").st("height",20).st("width",500).text(function(e){return e.job_name}).on("click",function(e){var t=e.id,n=s(i,t),d=f(n);d3.selectAll("circle.job").remove();var p=d3.select("svg.scatter").selectAll("circle.job").data(n).enter().append("circle.job");p.at("cx",function(e){return d(e.similarity)}).at("cy",function(e){return j(a[e.id_compared])}).st("fill",function(e){var t=c[e.id_selected],n=c[e.id_compared];return _(t/n)}).at("r",function(e){var t=o[e.id_compared];return h(t)}).st("stroke","black"),p.on("mouseenter",function(e,t,n){var i=d3.select("div.jobTooltip"),a=d3.select(n[t]).at("cx"),c=d3.select(n[t]).at("cy");i.st("left",a+"px").st("top",c+"px"),u=s(l,e.id_compared),d3.select("div.job-selected-name").text("Main job: "+r[e.id_selected]),d3.select("div.job-compared-name").text("Compared job: "+r[e.id_compared]),d3.select("div.job-selected-number").text("Main job quantity: "+o[e.id_selected]),d3.select("div.job-compared-number").text("Compared job quantity: "+o[e.id_compared])})});var g=v.selectAll("circle.job").data(m).enter().append("circle.job");g.at("cx",function(e){return y(e.similarity)}).at("cy",function(e){return j(a[e.id_compared])}).at("r",function(e){var t=o[e.id_compared];return h(t)}).st("stroke","black").st("fill",function(e){var t=c[e.id_selected],n=c[e.id_compared];return _(t/n)});var x=d3.select("div.svg-container").append("div.jobTooltip");x.append("div.job-selected-name"),x.append("div.job-compared-name"),x.append("div.job-selected-number"),x.append("div.job-compared-number"),x.append("div.job-skills-container").selectAll("div.job-skills-bar").data(u).enter().append("div.job-skills-bar").st("height","20px").st("background","#e0e0e0").st("border-style","solid").st("border-color","black").st("margin-bottom","2px").st("overflow","visible").st("display","block"),g.on("mouseenter",function(e,t,n){var i=d3.select("div.jobTooltip"),a=d3.select(n[t]).at("cx"),c=d3.select(n[t]).at("cy");i.st("left",a+"px").st("top",c+"px"),d3.select("div.job-selected-name").text("Main job: "+r[e.id_selected]),d3.select("div.job-compared-name").text("Compared job: "+r[e.id_compared]),d3.select("div.job-selected-number").text("Main job quantity: "+o[e.id_selected]),d3.select("div.job-compared-number").text("Compared job quantity: "+o[e.id_compared]);var f=i.select("div.job-skills-container").selectAll("div.job-skills-bar");u=s(l,e.id_compared),console.log(u),f.data(u).st("height","20px").st("width",function(e){return e.imp+"px"}).text(function(e){return d[e.skill_id]})})}]))},resize:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return i.android()||i.blackberry()||i.ios()||i.opera()||i.windows()}};t.default=i},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){var n=NaN,i="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,s=u||l||Function("return this")(),f=Object.prototype.toString,p=Math.max,b=Math.min,v=function(){return s.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function j(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==i}(e))return n;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var u=a.test(e);return u||c.test(e)?d(e.slice(2),u?2:8):o.test(e)?n:+e}e.exports=function(e,t,n){var i,r,o,a,c,d,u=0,l=!1,s=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=i,o=r;return i=r=void 0,u=t,a=e.apply(o,n)}function _(e){var n=e-d;return void 0===d||n>=t||n<0||s&&e-u>=o}function h(){var e=v();if(_(e))return g(e);c=setTimeout(h,function(e){var n=t-(e-d);return s?b(n,o-(e-u)):n}(e))}function g(e){return c=void 0,f&&i?y(e):(i=r=void 0,a)}function x(){var e=v(),n=_(e);if(i=arguments,r=this,d=e,n){if(void 0===c)return function(e){return u=e,c=setTimeout(h,t),l?y(e):a}(d);if(s)return c=setTimeout(h,t),y(d)}return void 0===c&&(c=setTimeout(h,t)),a}return t=j(t)||0,m(n)&&(l=!!n.leading,o=(s="maxWait"in n)?p(j(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),x.cancel=function(){void 0!==c&&clearTimeout(c),u=0,i=d=r=c=void 0},x.flush=function(){return void 0===c?a:g(v())},x}}).call(this,n(2))},function(e,t,n){"use strict";var i=a(n(3)),r=a(n(1)),o=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var c=d3.select("body"),d=0;c.classed("is-mobile",r.default.any()),window.addEventListener("resize",(0,i.default)(function(){var e=c.node().offsetWidth;d!==e&&(d=e,o.default.resize())},150)),o.default.init()}]);